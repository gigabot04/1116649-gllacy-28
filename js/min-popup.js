let fiew=document.querySelectorAll(".block"),btnClose=document.querySelector(".close"),btn=document.querySelector(".block-btn"),popup=document.querySelector(".popup"),popupName=popup.querySelector("[type=text]"),popupEmail=popup.querySelector("[type=email]"),popupTextarea=popup.querySelector("textarea"),popupSubmit=popup.querySelector(".popup-form"),isStorageSupport=!0,storageEmail="",storageName="";try{storageEmail=localStorage.getItem("email"),storageName=localStorage.getItem("Name")}catch(a){isStorageSupport=!1}popupSubmit.addEventListener("submit",function(a){popupName.value&&popupTextarea.value&&popupEmail.value?isStorageSupport&&(localStorage.setItem("email",popupEmail.value),localStorage.setItem("Name",popupName.value)):(a.preventDefault(),popup.classList.remove("popupError"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("popupError"))}),btn.addEventListener("click",function(a){a.preventDefault();for(let b=0;b<fiew.length;b++)fiew[b].style.display="block";popup.classList.remove("popupError"),storageName?(popupName.value=storageName,popupEmail.focus()):popupName.focus(),storageEmail&&(popupEmail.value=storageEmail,popupTextarea.focus())}),btnClose.addEventListener("click",function(a){a.preventDefault();for(let b=0;b<fiew.length;b++)fiew[b].style.display="none"}),window.addEventListener("keydown",function(a){if(27===a.keyCode){for(let b=0;b<fiew.length;b++)(fiew[b].style.display="block")&&(a.preventDefault(),fiew[b].style.display="none");popup.classList.remove("popupError")}});